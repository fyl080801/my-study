# 2018-11-22

## 本周工作

- 解决部分首页加载时报警告信息问题

  > 因为 propType 定义的数据类型和赋值类型不同导致的异常
  >
  > 因为在 render 过程中发生 state 值变化导致的警告

- 导航栏

  > 增加了到全部试用的链接

- 开会沟通全部试用的需求

  > 会上讨论全部试用查询条件改成动态的，但是为了和 pc 上统一，现在做成查询项是固定三个（类别、类目、状态），每一项下面的查询条件从服务器获取

- 更新项目在全部试用分支下的框架版本

  > 升级到最新版本，解决源码冲突问题

- 开发工作

  > 已经完成查询项和查询从中台获取数据，ios 上可正常获取
  >
  > 目前安卓还有问题，但是在浏览器访问查询地址却能正常，如果从 ios 上访问安卓的地址也可正常

## 问题

- 发现试用首页在访问时由于 state 更新导致多次渲染，至少有 11 次，并且每次都是全部重新渲染

- 从全部试用跳回首页会有明显卡顿现象应该是渲染问题导致的

- 由于之前首页是有多个服务请求，并且在每次请求前后都会更新请求状态所以会多次更新 state 导致触发渲染

## 学习情况

- 研究 react native 中组件渲染优化方面的解决方案

  > 寻找首页显示慢的原因
  > 发现组件有个 shouldComponentUpdate 方法用来判断是否重新渲染，经过实验可以实现自行判断组件是否需要重新渲染达到优化目的

- 使用 expo 开发调试 react native 应用

- 如何模块化开发 rn

  > 开发过程中发现 reducer 只负责更新整个 state，没有其他操作而目前每写一个方法就要对应多个 reducer，考虑使用三层开发的理念，将 store 中的属性在 reducer 中统一成数据访问层相关操作(CRUD)
  >
  > 目前所有模块都在一个项目中开发，是按照 component、reducer、action 划分的，考虑按照功能将各自相关的实现分离开

## 下周工作

- 全部试用功能的开发，解决遇到的问题
